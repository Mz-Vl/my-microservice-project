# üì¶ Lesson 5 ‚Äî Terraform Infrastructure on AWS

–¶–µ–π –ø—Ä–æ—î–∫—Ç —Ä–µ–∞–ª—ñ–∑—É—î —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É AWS –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Terraform —É —Ä–∞–º–∫–∞—Ö –Ω–∞–≤—á–∞–ª—å–Ω–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è. –ü—Ä–æ—î–∫—Ç –æ—Ä–≥–∞–Ω—ñ–∑–æ–≤–∞–Ω–∏–π –º–æ–¥—É–ª—å–Ω–æ –¥–ª—è –∫—Ä–∞—â–æ—ó –º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω–æ—Å—Ç—ñ —Ç–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è.

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

lesson-5/
‚îÇ
‚îú‚îÄ‚îÄ main.tf # –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –≤—Å—ñ—Ö –º–æ–¥—É–ª—ñ–≤
‚îú‚îÄ‚îÄ backend.tf # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–µ–∫–µ–Ω–¥—É Terraform (S3 + DynamoDB)
‚îú‚îÄ‚îÄ outputs.tf # –ó–∞–≥–∞–ª—å–Ω—ñ –≤–∏—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ –∑ —É—Å—ñ—Ö –º–æ–¥—É–ª—ñ–≤
‚îÇ
‚îú‚îÄ‚îÄ modules/
‚îÇ ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ s3-backend/ # –ú–æ–¥—É–ª—å –¥–ª—è –±–µ–∫–µ–Ω–¥—É
‚îÇ ‚îÇ     ‚îú‚îÄ‚îÄ s3.tf # –°—Ç–≤–æ—Ä–µ–Ω–Ω—è S3 –±–∞–∫–µ—Ç–∞
‚îÇ ‚îÇ     ‚îú‚îÄ‚îÄ dynamodb.tf # –°—Ç–≤–æ—Ä–µ–Ω–Ω—è DynamoDB —Ç–∞–±–ª–∏—Ü—ñ
‚îÇ ‚îÇ     ‚îú‚îÄ‚îÄ variables.tf # –ó–º—ñ–Ω–Ω—ñ –¥–ª—è S3 —Ç–∞ DynamoDB
‚îÇ ‚îÇ     ‚îî‚îÄ‚îÄ outputs.tf # –í–∏–≤–µ–¥–µ–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –±–µ–∫–µ–Ω–¥
‚îÇ ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ vpc/ # –ú–æ–¥—É–ª—å –¥–ª—è –º–µ—Ä–µ–∂–µ–≤–æ—ó —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏
‚îÇ ‚îÇ     ‚îú‚îÄ‚îÄ vpc.tf # VPC, —Å–∞–±–Ω–µ—Ç–∏, Internet Gateway
‚îÇ ‚îÇ     ‚îú‚îÄ‚îÄ routes.tf # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–∞—Ä—à—Ä—É—Ç—ñ–≤
‚îÇ ‚îÇ     ‚îú‚îÄ‚îÄ variables.tf # –ó–º—ñ–Ω–Ω—ñ –¥–ª—è VPC
‚îÇ ‚îÇ     ‚îî‚îÄ‚îÄ outputs.tf # –í–∏–≤–µ–¥–µ–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ VPC
‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ ecr/ # –ú–æ–¥—É–ª—å –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é ECR
‚îÇ       ‚îú‚îÄ‚îÄ ecr.tf # –°—Ç–≤–æ—Ä–µ–Ω–Ω—è ECR
‚îÇ       ‚îú‚îÄ‚îÄ variables.tf # –ó–º—ñ–Ω–Ω—ñ –¥–ª—è ECR
‚îÇ       ‚îî‚îÄ‚îÄ outputs.tf # –í–∏–≤–µ–¥–µ–Ω–Ω—è URL —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
‚îÇ
‚îî‚îÄ‚îÄ README.md # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –ø—Ä–æ—î–∫—Ç—É


## üåê –û–ø–∏—Å –º–æ–¥—É–ª—ñ–≤

‚úÖ **S3 + DynamoDB (s3-backend)**  
- –°—Ç–≤–æ—Ä—é—î S3 –±–∞–∫–µ—Ç –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Å—Ç–µ–π—Ç—ñ–≤  
- –°—Ç–≤–æ—Ä—é—î DynamoDB —Ç–∞–±–ª–∏—Ü—é –¥–ª—è –±–ª–æ–∫—É–≤–∞–Ω–Ω—è —Å—Ç–µ–π—Ç—É  
- –ó–∞–±–µ–∑–ø–µ—á—É—î –±–µ–∑–ø–µ—á–Ω–µ, —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è

‚úÖ **VPC**  
- –°—Ç–≤–æ—Ä—é—î VPC –∑ CIDR  
- 3 –ø—É–±–ª—ñ—á–Ω—ñ –ø—ñ–¥–º–µ—Ä–µ–∂—ñ  
- 3 –ø—Ä–∏–≤–∞—Ç–Ω—ñ –ø—ñ–¥–º–µ—Ä–µ–∂—ñ  
- Internet Gateway –¥–ª—è –ø—É–±–ª—ñ—á–Ω–∏—Ö —Å–∞–±–Ω–µ—Ç—ñ–≤  
- NAT Gateway –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω–∏—Ö —Å–∞–±–Ω–µ—Ç—ñ–≤  
- –¢–∞–±–ª–∏—Ü—ñ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—ó

‚úÖ **ECR**  
- –°—Ç–≤–æ—Ä—é—î —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è Docker-–æ–±—Ä–∞–∑—ñ–≤  
- –í–º–∏–∫–∞—î —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è –æ–±—Ä–∞–∑—ñ–≤

## üöÄ –Ø–∫ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏

> ‚ö†Ô∏è –ü—ñ—Å–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ –≤–∏–∫–æ–Ω–∞–π—Ç–µ `terraform destroy`, —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –Ω–µ–æ—á—ñ–∫—É–≤–∞–Ω–∏—Ö –≤–∏—Ç—Ä–∞—Ç –Ω–∞ AWS!

```bash
terraform init       # —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
terraform plan       # –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–ª–∞–Ω—É
terraform apply      # —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤
terraform destroy    # –∑–Ω–∏—â–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤

## üìù –ü—Ä–∏–º—ñ—Ç–∫–∞
- –ü—ñ—Å–ª—è terraform destroy –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –æ—á–∏—Å—Ç–∏—Ç–∏ –≤—Ä—É—á–Ω—É –≤–º—ñ—Å—Ç –±–∞–∫–µ—Ç–∞ S3, —è–∫—â–æ –≤—ñ–Ω –Ω–µ –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.
- –ó–∞ –ø–æ—Ç—Ä–µ–±–∏ —Ç–∞–∫–æ–∂ –≤–∏–¥–∞–ª–∏—Ç–∏ DynamoDB —Ç–∞–±–ª–∏—Ü—é –≤—Ä—É—á–Ω—É, —è–∫—â–æ –≤–æ–Ω–∞ –∑–∞–ª–∏—à–∏—Ç—å—Å—è.
