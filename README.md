üì¶ Lesson 7 ‚Äî Django Kubernetes Deployment on AWS
–¶–µ–π –ø—Ä–æ—î–∫—Ç —Ä–æ–∑–≥–æ—Ä—Ç–∞—î Django-–∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ —É –∫–ª–∞—Å—Ç–µ—Ä—ñ Kubernetes, —Å—Ç–≤–æ—Ä–µ–Ω–æ–º—É —á–µ—Ä–µ–∑ Terraform, –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º Helm-—á–∞—Ä—Ç—É —Ç–∞ ECR.

üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É
lesson-7/
main.tf ‚Äî –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –≤—Å—ñ—Ö –º–æ–¥—É–ª—ñ–≤
backend.tf ‚Äî –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–µ–∫–µ–Ω–¥—É Terraform (S3 + DynamoDB)
outputs.tf ‚Äî –≤–∏–≤–æ–¥–∏ —Ä–µ—Å—É—Ä—Å—ñ–≤

modules/
‚îú‚îÄ‚îÄ s3-backend/
‚ÄÉ‚ÄÉs3.tf ‚Äî —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è S3 –±–∞–∫–µ—Ç–∞
‚ÄÉ‚ÄÉdynamodb.tf ‚Äî —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è DynamoDB
‚ÄÉ‚ÄÉvariables.tf ‚Äî –∑–º—ñ–Ω–Ω—ñ
‚ÄÉ‚ÄÉoutputs.tf ‚Äî –≤–∏–≤–µ–¥–µ–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó

‚îú‚îÄ‚îÄ vpc/
‚ÄÉ‚ÄÉvpc.tf ‚Äî –æ–ø–∏—Å VPC, —Å–∞–±–Ω–µ—Ç—ñ–≤, IGW
‚ÄÉ‚ÄÉroutes.tf ‚Äî —Ç–∞–±–ª–∏—Ü—ñ –º–∞—Ä—à—Ä—É—Ç—ñ–≤
‚ÄÉ‚ÄÉvariables.tf ‚Äî –∑–º—ñ–Ω–Ω—ñ
‚ÄÉ‚ÄÉoutputs.tf ‚Äî –≤–∏–≤–µ–¥–µ–Ω–Ω—è

‚îú‚îÄ‚îÄ ecr/
‚ÄÉ‚ÄÉecr.tf ‚Äî —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
‚ÄÉ‚ÄÉvariables.tf ‚Äî –∑–º—ñ–Ω–Ω—ñ
‚ÄÉ‚ÄÉoutputs.tf ‚Äî –≤–∏–≤–µ–¥–µ–Ω–Ω—è

‚îú‚îÄ‚îÄ eks/
‚ÄÉ‚ÄÉeks.tf ‚Äî —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–ª–∞—Å—Ç–µ—Ä–∞
‚ÄÉ‚ÄÉvariables.tf ‚Äî –∑–º—ñ–Ω–Ω—ñ
‚ÄÉ‚ÄÉoutputs.tf ‚Äî –≤–∏–≤–µ–¥–µ–Ω–Ω—è

charts/
‚îî‚îÄ‚îÄ django-app/
‚ÄÉ‚ÄÉChart.yaml ‚Äî –æ–ø–∏—Å Helm-—á–∞—Ä—Ç—É
‚ÄÉ‚ÄÉvalues.yaml ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –æ–±—Ä–∞–∑—É, —Å–µ—Ä–≤—ñ—Å—É, autoscaler
‚ÄÉ‚ÄÉtemplates/
‚ÄÉ‚ÄÉ‚ÄÉdeployment.yaml ‚Äî –¥–µ–ø–ª–æ–π Django
‚ÄÉ‚ÄÉ‚ÄÉservice.yaml ‚Äî —Å–µ—Ä–≤—ñ—Å –¥–ª—è –¥–æ—Å—Ç—É–ø—É
‚ÄÉ‚ÄÉ‚ÄÉhpa.yaml ‚Äî autoscaler
‚ÄÉ‚ÄÉ‚ÄÉconfigmap.yaml ‚Äî –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

README.md ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –ø—Ä–æ—î–∫—Ç—É

üåê –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
‚úÖ Terraform

–°—Ç–≤–æ—Ä—é—î EKS –∫–ª–∞—Å—Ç–µ—Ä

–°—Ç–≤–æ—Ä—é—î VPC (–∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —ñ—Å–Ω—É—é—á—É)

–°—Ç–≤–æ—Ä—é—î ECR –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è Docker-–æ–±—Ä–∞–∑—É

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –±–µ–∫–µ–Ω–¥ S3 + DynamoDB –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Å—Ç–µ–π—Ç—ñ–≤

‚úÖ Docker + ECR

Docker-–æ–±—Ä–∞–∑ Django –∑—ñ–±—Ä–∞–Ω–∏–π –ª–æ–∫–∞–ª—å–Ω–æ

–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏–π –¥–æ ECR —á–µ—Ä–µ–∑ docker push

‚úÖ Helm

Deployment –¥–ª—è Django (–∑ –æ–±—Ä–∞–∑–æ–º —ñ–∑ ECR)

Service (ClusterIP)

ConfigMap (–ø—ñ–¥—Ç—è–≥—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞)

HPA (–º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è –≤—ñ–¥ 2 –¥–æ 6 –ø—Ä–∏ 70% CPU)

Ingress (ALB) –¥–ª—è –¥–æ—Å—Ç—É–ø—É –∑ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É

‚úÖ Ingress

Application Load Balancer (ALB)

HTTP 200 –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ (—Å—Ç–æ—Ä—ñ–Ω–∫–∞ Django –≤—ñ–¥–¥–∞—î—Ç—å—Å—è)

‚úÖ ConfigMap

–∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ñ –∑ —Ç–µ–º–∏ 4

–ø—ñ–¥–∫–ª—é—á–µ–Ω—ñ —á–µ—Ä–µ–∑ Helm

üöÄ –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è
‚ö†Ô∏è –ü—ñ—Å–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ –∑—Ä–æ–±—ñ—Ç—å terraform destroy, —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –Ω–µ–æ—á—ñ–∫—É–≤–∞–Ω–∏—Ö –≤–∏—Ç—Ä–∞—Ç –Ω–∞ AWS!

bash
Copy
Edit
# —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è Terraform
terraform init

# –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–ª–∞–Ω—É
terraform plan

# —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏
terraform apply

# –∑–±—ñ—Ä–∫–∞ Docker-–æ–±—Ä–∞–∑—É
docker build -t <ecr-repo>:latest .

# –ø—É—à Docker-–æ–±—Ä–∞–∑—É
docker push <ecr-repo>:latest

# –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ Helm
cd lesson-7/charts/django-app
helm upgrade --install django-app .

# –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞
kubectl get ingress
kubectl get svc
kubectl get pods

# –ø—Ä–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ
terraform destroy
üìù –ü—Ä–∏–º—ñ—Ç–∫–∏
ALLOWED_HOSTS –º–∞—î –±—É—Ç–∏ –ø—Ä–æ–ø–∏—Å–∞–Ω–∏–π –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ –∞–¥—Ä–µ—Å–∏ ALB

DEBUG –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –≤–∏–º–∫–Ω–µ–Ω–∏–π —É production

HPA –∫–æ–Ω—Ç—Ä–æ–ª—é—î—Ç—å—Å—è —á–µ—Ä–µ–∑ –∑–Ω–∞—á–µ–Ω–Ω—è —É values.yaml
